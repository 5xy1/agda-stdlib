<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>IO.Primitive.Finite</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Primitive IO: simple bindings to Haskell types and functions</a>
<a id="170" class="Comment">-- Everything is assumed to be finite</a>
<a id="208" class="Comment">------------------------------------------------------------------------</a>

<a id="282" class="Symbol">{-#</a> <a id="286" class="Keyword">OPTIONS</a> <a id="294" class="Pragma">--without-K</a> <a id="306" class="Symbol">#-}</a>

<a id="311" class="Keyword">module</a> <a id="318" href="IO.Primitive.Finite.html" class="Module">IO.Primitive.Finite</a> <a id="338" class="Keyword">where</a>

<a id="345" class="Keyword">open</a> <a id="350" class="Keyword">import</a> <a id="357" href="Agda.Builtin.IO.html" class="Module">Agda.Builtin.IO</a>
<a id="373" class="Keyword">open</a> <a id="378" class="Keyword">import</a> <a id="385" href="Agda.Builtin.String.html" class="Module">Agda.Builtin.String</a>
<a id="405" class="Keyword">open</a> <a id="410" class="Keyword">import</a> <a id="417" href="Agda.Builtin.Unit.html" class="Module">Agda.Builtin.Unit</a> <a id="435" class="Keyword">using</a> <a id="441" class="Symbol">()</a> <a id="444" class="Keyword">renaming</a> <a id="453" class="Symbol">(</a><a id="454" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a> <a id="456" class="Symbol">to</a> <a id="⊤"></a><a id="459" href="IO.Primitive.Finite.html#459" class="Record">Unit</a><a id="463" class="Symbol">)</a>

<a id="466" class="Comment">------------------------------------------------------------------------</a>
<a id="539" class="Comment">-- Simple lazy IO</a>

<a id="558" class="Comment">-- Note that the functions below produce commands which, when</a>
<a id="620" class="Comment">-- executed, may raise exceptions.</a>

<a id="656" class="Comment">-- Note also that the semantics of these functions depends on the</a>
<a id="722" class="Comment">-- version of the Haskell base library. If the version is 4.2.0.0 (or</a>
<a id="792" class="Comment">-- later?), then the functions use the character encoding specified by</a>
<a id="863" class="Comment">-- the locale. For older versions of the library (going back to at</a>
<a id="930" class="Comment">-- least version 3) the functions use ISO-8859-1.</a>

<a id="981" class="Keyword">postulate</a>
  <a id="getLine"></a><a id="993" href="IO.Primitive.Finite.html#993" class="Postulate">getLine</a>     <a id="1005" class="Symbol">:</a> <a id="1007" href="Agda.Builtin.IO.html#138" class="Postulate">IO</a> <a id="1010" href="Agda.Builtin.String.html#274" class="Postulate">String</a>
  <a id="readFile"></a><a id="1019" href="IO.Primitive.Finite.html#1019" class="Postulate">readFile</a>    <a id="1031" class="Symbol">:</a> <a id="1033" href="Agda.Builtin.String.html#274" class="Postulate">String</a> <a id="1040" class="Symbol">→</a> <a id="1042" href="Agda.Builtin.IO.html#138" class="Postulate">IO</a> <a id="1045" href="Agda.Builtin.String.html#274" class="Postulate">String</a>
  <a id="writeFile"></a><a id="1054" href="IO.Primitive.Finite.html#1054" class="Postulate">writeFile</a>   <a id="1066" class="Symbol">:</a> <a id="1068" href="Agda.Builtin.String.html#274" class="Postulate">String</a> <a id="1075" class="Symbol">→</a> <a id="1077" href="Agda.Builtin.String.html#274" class="Postulate">String</a> <a id="1084" class="Symbol">→</a> <a id="1086" href="Agda.Builtin.IO.html#138" class="Postulate">IO</a> <a id="1089" href="IO.Primitive.Finite.html#459" class="Record">Unit</a>
  <a id="appendFile"></a><a id="1096" href="IO.Primitive.Finite.html#1096" class="Postulate">appendFile</a>  <a id="1108" class="Symbol">:</a> <a id="1110" href="Agda.Builtin.String.html#274" class="Postulate">String</a> <a id="1117" class="Symbol">→</a> <a id="1119" href="Agda.Builtin.String.html#274" class="Postulate">String</a> <a id="1126" class="Symbol">→</a> <a id="1128" href="Agda.Builtin.IO.html#138" class="Postulate">IO</a> <a id="1131" href="IO.Primitive.Finite.html#459" class="Record">Unit</a>
  <a id="putStr"></a><a id="1138" href="IO.Primitive.Finite.html#1138" class="Postulate">putStr</a>      <a id="1150" class="Symbol">:</a> <a id="1152" href="Agda.Builtin.String.html#274" class="Postulate">String</a> <a id="1159" class="Symbol">→</a> <a id="1161" href="Agda.Builtin.IO.html#138" class="Postulate">IO</a> <a id="1164" href="IO.Primitive.Finite.html#459" class="Record">Unit</a>
  <a id="putStrLn"></a><a id="1171" href="IO.Primitive.Finite.html#1171" class="Postulate">putStrLn</a>    <a id="1183" class="Symbol">:</a> <a id="1185" href="Agda.Builtin.String.html#274" class="Postulate">String</a> <a id="1192" class="Symbol">→</a> <a id="1194" href="Agda.Builtin.IO.html#138" class="Postulate">IO</a> <a id="1197" href="IO.Primitive.Finite.html#459" class="Record">Unit</a>

<a id="1203" class="Symbol">{-#</a> <a id="1207" class="Keyword">FOREIGN</a> <a id="1215" class="Pragma">GHC</a> <a id="1219" class="Pragma">import</a> <a id="1226" class="Pragma">qualified</a> <a id="1236" class="Pragma">Data.Text</a>    <a id="1249" class="Pragma">as</a> <a id="1252" class="Pragma">T</a>   <a id="1256" class="Symbol">#-}</a>
<a id="1260" class="Symbol">{-#</a> <a id="1264" class="Keyword">FOREIGN</a> <a id="1272" class="Pragma">GHC</a> <a id="1276" class="Pragma">import</a> <a id="1283" class="Pragma">qualified</a> <a id="1293" class="Pragma">Data.Text.IO</a> <a id="1306" class="Pragma">as</a> <a id="1309" class="Pragma">TIO</a> <a id="1313" class="Symbol">#-}</a>
<a id="1317" class="Symbol">{-#</a> <a id="1321" class="Keyword">FOREIGN</a> <a id="1329" class="Pragma">GHC</a> <a id="1333" class="Pragma">import</a> <a id="1340" class="Pragma">qualified</a> <a id="1350" class="Pragma">System.IO</a>           <a id="1370" class="Symbol">#-}</a>
<a id="1374" class="Symbol">{-#</a> <a id="1378" class="Keyword">FOREIGN</a> <a id="1386" class="Pragma">GHC</a> <a id="1390" class="Pragma">import</a> <a id="1397" class="Pragma">qualified</a> <a id="1407" class="Pragma">Control.Exception</a>   <a id="1427" class="Symbol">#-}</a>

<a id="1432" class="Symbol">{-#</a> <a id="1436" class="Keyword">FOREIGN</a> <a id="1444" class="Pragma">GHC</a>

  <a id="1451" class="Pragma">--</a> <a id="1454" class="Pragma">Reads</a> <a id="1460" class="Pragma">a</a> <a id="1462" class="Pragma">finite</a> <a id="1469" class="Pragma">file.</a> <a id="1475" class="Pragma">Raises</a> <a id="1482" class="Pragma">an</a> <a id="1485" class="Pragma">exception</a> <a id="1495" class="Pragma">if</a> <a id="1498" class="Pragma">the</a> <a id="1502" class="Pragma">file</a> <a id="1507" class="Pragma">path</a> <a id="1512" class="Pragma">refers</a>
  <a id="1521" class="Pragma">--</a> <a id="1524" class="Pragma">to</a> <a id="1527" class="Pragma">a</a> <a id="1529" class="Pragma">non-physical</a> <a id="1542" class="Pragma">file</a> <a id="1547" class="Pragma">(like</a> <a id="1553" class="Pragma">&quot;/dev/zero&quot;).</a>
  <a id="1569" class="Pragma">readFiniteFile</a> <a id="1584" class="Pragma">::</a> <a id="1587" class="Pragma">T.Text</a> <a id="1594" class="Pragma">-&gt;</a> <a id="1597" class="Pragma">IO</a> <a id="1600" class="Pragma">T.Text</a>
  <a id="1609" class="Pragma">readFiniteFile</a> <a id="1624" class="Pragma">f</a> <a id="1626" class="Pragma">=</a> <a id="1628" class="Pragma">do</a>
    <a id="1635" class="Pragma">h</a> <a id="1637" class="Pragma">&lt;-</a> <a id="1640" class="Pragma">System.IO.openFile</a> <a id="1659" class="Pragma">(T.unpack</a> <a id="1669" class="Pragma">f)</a> <a id="1672" class="Pragma">System.IO.ReadMode</a>
    <a id="1695" class="Pragma">Control.Exception.bracketOnError</a> <a id="1728" class="Pragma">(return</a> <a id="1736" class="Pragma">())</a> <a id="1740" class="Pragma">(\_</a> <a id="1744" class="Pragma">-&gt;</a> <a id="1747" class="Pragma">System.IO.hClose</a> <a id="1764" class="Pragma">h)</a>
                                                 <a id="1816" class="Pragma">(\_</a> <a id="1820" class="Pragma">-&gt;</a> <a id="1823" class="Pragma">System.IO.hFileSize</a> <a id="1843" class="Pragma">h)</a>
    <a id="1850" class="Pragma">TIO.hGetContents</a> <a id="1867" class="Pragma">h</a>

<a id="1870" class="Symbol">#-}</a>

<a id="1875" class="Symbol">{-#</a> <a id="1879" class="Keyword">COMPILE</a> <a id="1887" class="Keyword">GHC</a> <a id="1891" href="IO.Primitive.Finite.html#993" class="Postulate">getLine</a>    <a id="1902" class="Pragma">=</a> <a id="1904" class="Pragma">TIO.getLine</a>               <a id="1930" class="Symbol">#-}</a>
<a id="1934" class="Symbol">{-#</a> <a id="1938" class="Keyword">COMPILE</a> <a id="1946" class="Keyword">GHC</a> <a id="1950" href="IO.Primitive.Finite.html#1019" class="Postulate">readFile</a>   <a id="1961" class="Pragma">=</a> <a id="1963" class="Pragma">readFiniteFile</a>            <a id="1989" class="Symbol">#-}</a>
<a id="1993" class="Symbol">{-#</a> <a id="1997" class="Keyword">COMPILE</a> <a id="2005" class="Keyword">GHC</a> <a id="2009" href="IO.Primitive.Finite.html#1054" class="Postulate">writeFile</a>  <a id="2020" class="Pragma">=</a> <a id="2022" class="Pragma">TIO.writeFile</a> <a id="2036" class="Pragma">.</a> <a id="2038" class="Pragma">T.unpack</a>  <a id="2048" class="Symbol">#-}</a>
<a id="2052" class="Symbol">{-#</a> <a id="2056" class="Keyword">COMPILE</a> <a id="2064" class="Keyword">GHC</a> <a id="2068" href="IO.Primitive.Finite.html#1096" class="Postulate">appendFile</a> <a id="2079" class="Pragma">=</a> <a id="2081" class="Pragma">TIO.appendFile</a> <a id="2096" class="Pragma">.</a> <a id="2098" class="Pragma">T.unpack</a> <a id="2107" class="Symbol">#-}</a>
<a id="2111" class="Symbol">{-#</a> <a id="2115" class="Keyword">COMPILE</a> <a id="2123" class="Keyword">GHC</a> <a id="2127" href="IO.Primitive.Finite.html#1138" class="Postulate">putStr</a>     <a id="2138" class="Pragma">=</a> <a id="2140" class="Pragma">TIO.putStr</a>                <a id="2166" class="Symbol">#-}</a>
<a id="2170" class="Symbol">{-#</a> <a id="2174" class="Keyword">COMPILE</a> <a id="2182" class="Keyword">GHC</a> <a id="2186" href="IO.Primitive.Finite.html#1171" class="Postulate">putStrLn</a>   <a id="2197" class="Pragma">=</a> <a id="2199" class="Pragma">TIO.putStrLn</a>              <a id="2225" class="Symbol">#-}</a>

<a id="2230" class="Symbol">{-#</a> <a id="2234" class="Keyword">COMPILE</a> <a id="2242" class="Keyword">UHC</a> <a id="2246" href="IO.Primitive.Finite.html#1019" class="Postulate">readFile</a> <a id="2255" class="Pragma">=</a> <a id="2257" class="Pragma">UHC.Agda.Builtins.primReadFiniteFile</a>  <a id="2295" class="Symbol">#-}</a>
</pre></body></html>